# Introduction

With the introduction of the [new drivers for Datastax/Cassandra](https://docs.datastax.com/en/developer/java-driver/4.13/manual/core/) comes a problem for testing. The drivers utilise a DAO defined via an interface which then generates source code via Maven compilation.

Testing this meaningfully as it is autogenerated requires an integration testing approach. 

The testing tools used are:

[Cassandra Unit](https://github.com/jsevellec/cassandra-unit)

[Simulacron](https://github.com/datastax/simulacron)

[Test Containers Java](https://github.com/testcontainers/testcontainers-java)

# TL;DR

Cassandra unit is straightforward to use and implement but has many outdated dependencies. 

Simulacrum  didnâ€™t work with the 4.x series drivers. Additionally, it is built (IMO) for lower level FMEA tasks and as such is complex and far more involved. 

Test containers were easy to set up, understand and actually worked.

# This project

A simple web service was developed using the spring boot starter and the most basic implementation of the Datastax DAO Mapper. *Note: The project structure only exists to serve as a skeleton supporting the creation of tests (and to facilitate learning some Spring basics).*

The project has tests using each method available:

[Cassandra unit tests](src/test/java/com/ollie/unifieddriverupgrade/TestCassandraUnit.java)

[Simulacron tests](src/test/java/com/ollie/unifieddriverupgrade/TestSimulacron.java)

[Test containers tests](src/test/java/com/ollie/unifieddriverupgrade/TestContainers.java)

# Run

From the project root run: `mvn compile package test`
